{"version":3,"sources":["pages/plugins/Events/index.module.scss","components/Main/index.module.scss","components/Loader/index.module.scss","store/plugins/types.ts","store/plugins/utils.ts","store/plugins/createMap.ts","store/plugins/index.ts","utils/loader.ts","components/Loader/index.tsx","pages/plugins/Events/EventsTable.tsx","pages/plugins/Events/PluginsTable.tsx","pages/plugins/Events/ProcessesTable.tsx","pages/plugins/index.ts","pages/plugins/Events/index.tsx","routes.ts","components/SideMenu.tsx","components/Main/index.tsx","App.tsx","index.tsx"],"names":["module","exports","LoadState","WAITABLE_EVENTS","calcDuration","items","_","chain","maxBy","get","value","minBy","createMap","listenersMap","grouped","groupBy","mapValues","buildEventsLevel","buildListenersMap","list","keys","map","buildListenerLevel","eventsMap","buildProcsLevel","buildEventsMap","values","first","max","duration","numberOfProcesses","length","event","listenerName","pid","filePath","calls","worker","waitable","procMap","group","buildPluginsLevel","buildProcMap","utils","sumBy","buildCallsList","buildCallsMap","reduced","includes","pluginName","pluginsGroup","min","start","pluginsGroupWithRanges","orderBy","item","idx","title","range","end","callsGroup","flatten","Events","pluginsState","createState","sources","loadState","empty","usePluginsState","state","useHookstate","attach","Untracked","findSource","src","find","Error","setLoadingState","set","loading","setLoadedState","loaded","isLoaded","isLoading","isAllSourcesLoaded","every","error","addUntrackedSource","merge","rowsCount","fetchError","setUntrackedLoadingSourceState","source","setUntrackedErrorSourceState","msg","getErrors","filter","isEmpty","setUntrackedCompleteSourceState","addUntrackedItems","data","count","getSources","shouldFetch","buildMap","getMap","Loader","className","styles","loader","size","EventsTable","props","maxDuration","key","processes","columns","dataIndex","align","render","type","color","toUpperCase","width","percent","strokeWidth","strokeLinecap","format","bordered","pagination","dataSource","sortBy","reverse","expandable","expandedRowRender","drawNestedTable","Diagram","barItems","label","config","height","autoFit","renderer","isRange","xField","yField","tooltip","barStyle","stroke","lineWidth","xAxis","formatter","date","Math","round","content","position","layout","scroll","scrollbar","categorySize","animate","PluginsTable","containerHeight","shouldShowScroll","diagramContainerHeight","pluginsCollapse","Panel","header","pluginsDiagramWrapper","style","pluginsDiagramContaner","ProcsTable","tag","pageSize","Plugins","dataMap","Text","events","listenerslevel","subTitle","record","eventsLevel","ProcessesTable","pluginsLevel","routes","Icon","ApiOutlined","subItems","path","Component","firstItem","defaultPath","defaultOpenedMenu","defaultOpenedSubMenu","allRoutes","SubMenu","Menu","SideMenu","withRouter","history","theme","defaultSelectedKeys","selectedKeys","location","pathname","defaultOpenKeys","mode","icon","Item","onClick","push","Content","Layout","Footer","Sider","declaration","window","HERMIONE_PROFILER_FILES_DECLARATION","files","uniq","plugins","LOADER_ID","MainLayout","animationChain","P","delay","useState","collapsed","setCollapsed","updateFileListComponent","progressItems","LoadingOutlined","twoToneColor","CheckCircleTwoTone","CloseCircleTwoTone","indicator","strong","basename","then","notification","open","description","message","finishLoading","close","useEffect","forEach","maxBufferSize","emitter","EventEmitter","stream","oboe","hasErr","buffer","emitData","emit","chunk","concat","node","on","fail","err","body","thrown","String","done","complete","loadFile","receivedItems","errors","console","placement","children","container","collapsible","onCollapse","rightLayout","contentContainer","footer","href","App","Main","exact","to","component","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.a51b3f02.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"pluginsCollapse\":\"Events_pluginsCollapse__L7his\",\"pluginsDiagramContaner\":\"Events_pluginsDiagramContaner__1dkYW\",\"pluginsDiagramWrapper\":\"Events_pluginsDiagramWrapper__1wnF0\",\"events\":\"Events_events__3XJV4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Main_container__1ZgYJ\",\"contentContainer\":\"Main_contentContainer__36h-v\",\"rightLayout\":\"Main_rightLayout__2fsER\",\"content\":\"Main_content__1GxDW\",\"footer\":\"Main_footer__E703A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__2DkXo\"};","export type ProfilerStatsItem = {\n  worker: boolean;\n  pid: number;\n  pluginName: string;\n  listenerName: string;\n  event: string;\n  duration: number;\n  start: number;\n  end: number;\n};\n\nexport type PluginStatsItem = ProfilerStatsItem & {\n  filePath: string;\n};\n\nexport enum LoadState {\n  empty = 'empty',\n  loading = 'loading',\n  loaded = 'loaded',\n  error = 'error',\n}\n\nexport type Source = {\n  filePath: string;\n  rowsCount: number;\n  loadState: LoadState;\n  fetchError: string | null;\n};\n","import _ from 'lodash';\n\nconst WAITABLE_EVENTS = ['startRunner', 'endRunner', 'init'];\n\nexport const isEventWaitable = (event: string) =>\n  WAITABLE_EVENTS.includes(event);\n\nexport const calcDuration = (\n  items: { end: number; start: number }[]\n) => {\n  const end = _.chain(items).maxBy('end').get('end', 0).value();\n  const start = _.chain(items).minBy('start').get('start').value();\n\n  return end - start;\n};\n","import _ from 'lodash';\n\nimport { PluginStatsItem } from './types';\nimport * as utils from './utils';\n\nexport default function createMap(items: PluginStatsItem[]) {\n  return buildListenerLevel(items);\n}\n\nfunction buildListenerLevel(items: PluginStatsItem[]) {\n  const listenersMap = buildListenersMap(items);\n  const list = _.keys(listenersMap);\n\n  return {\n    list,\n    map: listenersMap,\n  };\n}\n\nfunction buildListenersMap(items: PluginStatsItem[]) {\n  const grouped = _.groupBy(items, 'listenerName');\n\n  return _.mapValues(grouped, buildEventsLevel);\n}\n\nfunction buildEventsLevel(items: PluginStatsItem[]) {\n  const eventsMap = buildEventsMap(items);\n  const list = _.values(eventsMap).map(({ list }) => {\n    const [first] = list;\n    const max = _.maxBy(list, 'duration');\n\n    return {\n      duration: max?.duration || 0,\n      numberOfProcesses: list.length,\n      event: first.event,\n      listenerName: first.listenerName,\n      pid: first.pid,\n      filePath: first.filePath,\n      calls: _.get(max, 'calls', 0),\n      worker: first.worker,\n      waitable: first.waitable,\n    };\n  });\n\n  return {\n    list,\n    map: eventsMap,\n  };\n}\n\nfunction buildEventsMap(items: PluginStatsItem[]) {\n  const grouped = _.groupBy(items, 'event');\n\n  return _.mapValues(grouped, buildProcsLevel);\n}\n\nfunction buildProcsLevel(items: PluginStatsItem[]) {\n  const procMap = buildProcMap(items);\n  const list = _.values(procMap).map(({ list, map }) => {\n    const [first] = list;\n    const duration = first.waitable\n      ? utils.calcDuration(_.values(map))\n      : _.sumBy(list, 'duration');\n\n    return {\n      duration,\n      pid: first.pid,\n      event: first.event,\n      filePath: first.filePath,\n      listenerName: first.listenerName,\n      worker: first.worker,\n      calls: _.sumBy(list, 'calls'),\n      waitable: first.waitable,\n    };\n  });\n\n  return {\n    list,\n    map: procMap,\n  };\n}\n\nfunction buildProcMap(items: PluginStatsItem[]) {\n  const group = _.groupBy(\n    items,\n    ({ filePath, pid }) => `${filePath}:${pid}`\n  );\n\n  return _.mapValues(group, buildPluginsLevel);\n}\n\nfunction buildPluginsLevel(items: PluginStatsItem[]) {\n  return {\n    list: buildCallsList(items),\n    map: buildCallsMap(items),\n  };\n}\n\nfunction buildCallsList(items: PluginStatsItem[]) {\n  const group = _.groupBy(items, 'pluginName');\n  const reduced = _.mapValues(group, (items) => {\n    const [first] = items;\n    const waitable = utils.isEventWaitable(first.event);\n    const duration = waitable\n      ? utils.calcDuration(items)\n      : _.sumBy(items, 'duration');\n\n    return {\n      duration,\n      calls: items.length,\n      pluginName: first.pluginName,\n      pid: first.pid,\n      filePath: first.filePath,\n      listenerName: first.listenerName,\n      event: first.event,\n      worker: first.worker,\n      waitable,\n    };\n  });\n\n  return _.values(reduced);\n}\n\nfunction buildCallsMap(items: PluginStatsItem[]) {\n  const pluginsGroup = _.groupBy(items, 'pluginName');\n  const min = _.minBy(items, 'start')?.start || 0;\n  const pluginsGroupWithRanges = _.mapValues(\n    pluginsGroup,\n    (items) => {\n      return _.orderBy(items, 'start').map((item, idx) => ({\n        ...item,\n        title: `${item.pluginName} (${idx + 1})`,\n        range: [item.start - min, item.end - min],\n      }));\n    }\n  );\n  const callsGroup = _.chain(pluginsGroupWithRanges)\n    .values()\n    .flatten()\n    .groupBy('title')\n    .value();\n\n  return _.mapValues(callsGroup, ([item]) => item || {});\n}\n","import { createState, useHookstate } from '@hookstate/core';\nimport { Untracked } from '@hookstate/untracked';\nimport _ from 'lodash';\n\nimport createMap from './createMap';\nimport {\n  LoadState,\n  PluginStatsItem,\n  ProfilerStatsItem,\n  Source,\n} from './types';\n\nconst pluginsState = createState({\n  sources: [] as Source[],\n  items: [] as PluginStatsItem[],\n  loadState: LoadState.empty,\n  map: {},\n});\n\nexport const usePluginsState = () => {\n  const state = useHookstate(pluginsState);\n\n  state.attach(Untracked);\n\n  const findSource = (filePath: string) => {\n    const src = state.sources.find(\n      (src) => src.filePath.get() === filePath\n    );\n\n    if (!src) {\n      throw new Error(`Unable to fine source=\"${filePath}\" in store`);\n    }\n\n    return src;\n  };\n\n  return {\n    state() {\n      return state;\n    },\n    setLoadingState() {\n      state.loadState.set(LoadState.loading);\n    },\n    setLoadedState() {\n      state.loadState.set(LoadState.loaded);\n    },\n    isLoaded() {\n      return state.loadState.get() === LoadState.loaded;\n    },\n    isLoading() {\n      return state.loadState.get() === LoadState.loading;\n    },\n    isAllSourcesLoaded() {\n      return state.sources.every((src) =>\n        [LoadState.error, LoadState.loaded].includes(\n          src.loadState.get()\n        )\n      );\n    },\n    addUntrackedSource(filePath: string) {\n      Untracked(state.sources).merge([\n        {\n          rowsCount: 0,\n          filePath,\n          fetchError: null,\n          loadState: LoadState.empty,\n        },\n      ]);\n    },\n    setUntrackedLoadingSourceState(filePath: string) {\n      const source = findSource(filePath);\n\n      Untracked(source.loadState).set(LoadState.loading);\n    },\n    setUntrackedErrorSourceState(filePath: string, msg: string) {\n      const source = findSource(filePath);\n\n      Untracked(source.loadState).set(LoadState.error);\n      Untracked(source.fetchError).set(msg);\n    },\n    getErrors() {\n      return state.sources\n        .filter((src) => !_.isEmpty(src.fetchError))\n        .map((src) => ({\n          filePath: src.filePath.get(),\n          error: src.fetchError.get(),\n        }));\n    },\n    setUntrackedCompleteSourceState(filePath: string) {\n      const source = findSource(filePath);\n\n      Untracked(source.loadState).set(LoadState.loaded);\n    },\n    addUntrackedItems(\n      filePath: string,\n      items: Array<ProfilerStatsItem>\n    ) {\n      const source = findSource(filePath);\n      const data = items.map((item) => ({ ...item, filePath }));\n\n      Untracked(state.items).merge(data);\n      Untracked(source.rowsCount).set(\n        (count) => count + items.length\n      );\n    },\n    getSources() {\n      return state.sources.get();\n    },\n    shouldFetch() {\n      return state.loadState.get() === LoadState.empty;\n    },\n    buildMap() {\n      const map = createMap(Untracked(state.items).get());\n\n      Untracked(state.map).set(map);\n    },\n    getMap() {\n      return Untracked(state.map).get() as ReturnType<\n        typeof createMap\n      >;\n    },\n  };\n};\n","import EventEmitter from 'events';\n\nimport oboe from 'oboe';\n\nenum Events {\n  chunk = 'chunk',\n  error = 'error',\n  complete = 'complete',\n  start = 'start',\n}\n\ninterface IFileLoader<T> extends NodeJS.EventEmitter {\n  on(event: `${Events.chunk}`, cb: (items: T[]) => void): this;\n  on(event: `${Events.error}`, cb: (msg: string) => void): this;\n  on(event: `${Events.start}`, cb: () => void): this;\n  on(event: `${Events.complete}`, cb: () => void): this;\n}\n\nexport const loadFile = <T>(\n  filePath: string,\n  maxBufferSize = 100\n) => {\n  const emitter: IFileLoader<T> = new EventEmitter();\n  const stream = oboe(filePath);\n  let hasErr = false;\n  let buffer: T[] = [];\n  const emitData = () => {\n    emitter.emit(Events.chunk, buffer.concat());\n    buffer = [];\n  };\n\n  stream\n    .node('root.*', (node: T) => {\n      buffer.push(node);\n\n      if (buffer.length === maxBufferSize) {\n        emitData();\n      }\n    })\n    .on('start', () => emitter.emit(Events.start))\n    .fail((err) => {\n      const msg = err.body || err.thrown?.message || String(err);\n\n      emitter.emit('error', msg);\n      hasErr = true;\n    })\n    .done(() => {\n      if (buffer.length > 0) {\n        emitData();\n      }\n\n      if (!hasErr) {\n        emitter.emit(Events.complete);\n      }\n    });\n\n  return emitter;\n};\n","import { Spin } from 'antd';\n\nimport styles from './index.module.scss';\n\nconst Loader: React.FC = () => (\n  <div className={styles.loader}>\n    <Spin size=\"large\" />\n  </div>\n);\n\nexport default Loader;\n","import { Progress, Table, Tag } from 'antd';\nimport _ from 'lodash';\n\ntype TableRecord = {\n  duration: number;\n  numberOfProcesses: number;\n  event: string;\n  listenerName: string;\n  pid: number;\n  filePath: string;\n  calls: number;\n  waitable: boolean;\n};\n\ntype Props = {\n  data: Array<TableRecord>;\n  drawNestedTable: (record: TableRecord) => React.ReactNode;\n};\n\nconst EventsTable: React.FC<Props> = (props) => {\n  const maxDuration = _.chain(props.data)\n    .map('duration')\n    .max()\n    .value();\n  const data = props.data.map((item) => ({\n    ...item,\n    key: item.event,\n    processes: item.numberOfProcesses,\n  }));\n\n  const columns = [\n    {\n      title: 'Event',\n      dataIndex: 'event',\n      key: 'event',\n    },\n    {\n      title: 'Number of processes',\n      dataIndex: 'numberOfProcesses',\n      key: 'numberOfProcesses',\n    },\n    {\n      title: 'Number of calls',\n      dataIndex: 'calls',\n      key: 'calls',\n    },\n    {\n      title: 'Type',\n      dataIndex: 'waitable',\n      key: 'waitable',\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      align: 'center' as any,\n      render: (waitable: string) => {\n        const [type, color] = waitable\n          ? ['WAITABLE', 'green']\n          : ['NON_WAITABLE', 'geekblue'];\n\n        return (\n          <Tag color={color} key={type}>\n            {type.toUpperCase()}\n          </Tag>\n        );\n      },\n    },\n    {\n      width: '50%',\n      title: 'Max by process duration',\n      dataIndex: 'duration',\n      key: 'duration',\n      render: (duration: number) => {\n        const percent = (100 / maxDuration) * duration - 1;\n\n        return (\n          <Progress\n            percent={percent}\n            strokeWidth={25}\n            strokeLinecap=\"square\"\n            format={() => `${duration} ms`}\n          />\n        );\n      },\n    },\n  ];\n\n  return (\n    <div>\n      <Table\n        bordered\n        pagination={false}\n        size=\"small\"\n        columns={columns}\n        dataSource={_.chain(data)\n          .sortBy('duration')\n          .reverse()\n          .value()}\n        expandable={{\n          expandedRowRender: props.drawNestedTable,\n        }}\n      />\n    </div>\n  );\n};\n\nexport default EventsTable;\n","import { Bar } from '@ant-design/charts';\nimport { Collapse, Progress, Table } from 'antd';\nimport _ from 'lodash';\n\nimport styles from './index.module.scss';\n\nconst ALLOWED_DIAGRAM_CONTAINER_HEIGHT = 500; //px\n\ntype TableRecord = {\n  duration: number;\n  pluginName: string;\n  calls: number;\n  waitable: boolean;\n};\n\ntype TableMap = {\n  [callName: string]: {\n    title: string;\n    range: number[];\n    duration: number;\n  };\n};\n\ntype Props = {\n  data: Array<TableRecord>;\n  map: TableMap;\n  drawNestedTable: (record: TableRecord) => React.ReactNode;\n};\n\ntype DiagramProps = {\n  data: TableMap;\n  height: number;\n  scroll: boolean;\n};\n\nconst Diagram: React.FC<DiagramProps> = (props) => {\n  const barItems = _(props.data)\n    .values()\n    .orderBy('start')\n    .map((item) => ({\n      value: item.range,\n      label: item.title,\n      duration: item.duration,\n    }))\n    .value();\n\n  const config = {\n    height: props.height,\n    autoFit: false,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    renderer: 'svg' as any,\n    data: barItems,\n    isRange: true,\n    xField: 'value',\n    yField: 'label',\n    color: '#1c90ff',\n    tooltip: false,\n    barStyle: {\n      stroke: '#1c90ff',\n      lineWidth: 1,\n    },\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    xAxis: {\n      label: {\n        formatter: (date: number) =>\n          `${date / 1000}sec / ${Math.round(date / 1000 / 60)}min`,\n      },\n    } as any,\n    label: {\n      content: (item: TableRecord) => `${item.duration} ms`,\n      position: 'right',\n      layout: [{ type: 'adjust-color' }],\n    } as any,\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n  };\n\n  if (props.scroll) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (config as any).scrollbar = {\n      type: 'vertical',\n      width: 10,\n      categorySize: 30,\n      animate: false,\n    };\n  }\n\n  return <Bar {...config} />;\n};\n\nconst PluginsTable: React.FC<Props> = (props) => {\n  const maxDuration = _.chain(props.data)\n    .map('duration')\n    .max()\n    .value();\n  const waitable = _.chain(props.data)\n    .first()\n    .get('waitable')\n    .value();\n  const data = props.data.map((item) => ({\n    ...item,\n    key: item.pluginName,\n  }));\n  const itemHeight = 30;\n  const barItemsCount = _.values(props.map).length;\n  const containerHeight = barItemsCount * itemHeight;\n  const shouldShowScroll =\n    containerHeight > ALLOWED_DIAGRAM_CONTAINER_HEIGHT;\n  const diagramContainerHeight = shouldShowScroll\n    ? ALLOWED_DIAGRAM_CONTAINER_HEIGHT\n    : containerHeight;\n\n  const columns = [\n    {\n      title: 'Plugin name',\n      dataIndex: 'pluginName',\n      key: 'pluginName',\n    },\n    {\n      title: 'Number of calls',\n      dataIndex: 'calls',\n      key: 'calls',\n    },\n    {\n      width: '50%',\n      title: waitable\n        ? 'Range between start and end of all calls'\n        : 'Sum duration of plugin calls',\n      key: 'duration',\n      dataIndex: 'duration',\n      render: (duration: number) => {\n        const percent = (100 / maxDuration) * duration - 1;\n\n        return (\n          <Progress\n            percent={percent}\n            strokeWidth={25}\n            strokeLinecap=\"square\"\n            format={() => `${duration} ms`}\n          />\n        );\n      },\n    },\n  ];\n\n  return (\n    <div>\n      <Table\n        bordered\n        pagination={false}\n        size=\"small\"\n        columns={columns}\n        dataSource={_.sortBy(data, 'duration').reverse()}\n      />\n      <Collapse className={styles.pluginsCollapse}>\n        <Collapse.Panel header=\"Timeline diagram\" key=\"diagram\">\n          <div\n            className={styles.pluginsDiagramWrapper}\n            style={{ height: diagramContainerHeight }}\n          >\n            <div className={styles.pluginsDiagramContaner}>\n              <Diagram\n                data={props.map}\n                height={diagramContainerHeight}\n                scroll={shouldShowScroll}\n              />\n            </div>\n          </div>\n        </Collapse.Panel>\n      </Collapse>\n    </div>\n  );\n};\n\nexport default PluginsTable;\n","import { Progress, Table, Tag } from 'antd';\nimport _ from 'lodash';\n\ntype TableRecord = {\n  duration: number;\n  event: string;\n  listenerName: string;\n  pid: number;\n  filePath: string;\n  calls: number;\n  worker: boolean;\n  waitable: boolean;\n};\n\ntype Props = {\n  data: Array<TableRecord>;\n  drawNestedTable: (record: TableRecord) => React.ReactNode;\n};\n\nconst ProcsTable: React.FC<Props> = (props) => {\n  const maxDuration = _.chain(props.data)\n    .map('duration')\n    .max()\n    .value();\n  const waitable = _.chain(props.data)\n    .first()\n    .get('waitable')\n    .value();\n  const data = props.data.map((item) => ({\n    ...item,\n    key: `${item.filePath}:${item.pid}`,\n    type: item.worker ? 'worker' : 'master',\n  }));\n\n  const columns = [\n    {\n      title: 'File',\n      dataIndex: 'filePath',\n      key: 'filePath',\n    },\n    {\n      title: 'PID',\n      dataIndex: 'pid',\n      key: 'pid',\n    },\n    {\n      title: 'Number of calls',\n      dataIndex: 'calls',\n      key: 'calls',\n    },\n    {\n      title: 'Type',\n      dataIndex: 'type',\n      key: 'type',\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      align: 'center' as any,\n      render: (tag: string) => {\n        const color = tag === 'master' ? 'green' : 'geekblue';\n\n        return (\n          <Tag color={color} key={tag}>\n            {tag.toUpperCase()}\n          </Tag>\n        );\n      },\n    },\n    {\n      width: '50%',\n      title: waitable\n        ? 'Range between start and end of all plugins'\n        : 'Sum duration of plugins',\n      dataIndex: 'duration',\n      key: 'duration',\n      render: (duration: number) => {\n        const percent = (100 / maxDuration) * duration - 1;\n\n        return (\n          <Progress\n            percent={percent}\n            strokeWidth={25}\n            strokeLinecap=\"square\"\n            format={() => `${duration} ms`}\n          />\n        );\n      },\n    },\n  ];\n\n  return (\n    <div>\n      <Table\n        bordered\n        pagination={{ pageSize: 50 }}\n        size=\"small\"\n        columns={columns}\n        dataSource={_.chain(data)\n          .sortBy('duration')\n          .reverse()\n          .value()}\n        expandable={{ expandedRowRender: props.drawNestedTable }}\n      />\n    </div>\n  );\n};\n\nexport default ProcsTable;\n","import Events from './Events';\n\nconst Plugins = {\n  Events,\n};\n\nexport default Plugins;\n","import { PageHeader } from 'antd';\nimport { Typography } from 'antd';\nimport _ from 'lodash';\n\nimport { usePluginsState } from '../../../store/plugins';\n\nimport EventsTable from './EventsTable';\nimport PluginsTable from './PluginsTable';\nimport ProcessesTable from './ProcessesTable';\nimport styles from './index.module.scss';\n\nconst Events: React.FC = () => {\n  const state = usePluginsState();\n  const dataMap = state.getMap();\n\n  if (_.isEmpty(dataMap)) {\n    return (\n      <Typography.Text type=\"danger\">Nothing to show</Typography.Text>\n    );\n  }\n\n  return (\n    <div className={styles.events}>\n      {dataMap.list.map((listenerName) => {\n        const listenerslevel = dataMap.map[listenerName];\n\n        return (\n          <div key={listenerName}>\n            <PageHeader title={listenerName} subTitle=\"(listener)\" />\n            <EventsTable\n              data={listenerslevel.list}\n              drawNestedTable={(record) => {\n                const eventsLevel = listenerslevel.map[record.event];\n\n                return (\n                  <ProcessesTable\n                    data={eventsLevel.list}\n                    drawNestedTable={(record) => {\n                      const pluginsLevel =\n                        eventsLevel.map[\n                          `${record.filePath}:${record.pid}`\n                        ];\n\n                      return (\n                        <PluginsTable\n                          data={pluginsLevel.list}\n                          map={pluginsLevel.map}\n                          drawNestedTable={(record) => <div>KEK</div>}\n                        />\n                      );\n                    }}\n                  />\n                );\n              }}\n            />\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Events;\n","import { ApiOutlined } from '@ant-design/icons';\nimport _ from 'lodash';\n\nimport Plugins from './pages/plugins';\n\nexport const routes = [\n  {\n    title: 'Plugins',\n    Icon: ApiOutlined,\n    subItems: [\n      {\n        title: 'Events',\n        path: '/plugins/events',\n        Component: Plugins.Events,\n      },\n    ],\n  },\n];\n\nconst [firstItem] = routes;\nconst [firstSubitem] = firstItem.subItems;\n\nexport const defaultPath = firstSubitem.path;\nexport const defaultOpenedMenu = [firstItem.title];\nexport const defaultOpenedSubMenu = [defaultPath];\nexport const allRoutes = _.chain(routes)\n  .map('subItems')\n  .flatten()\n  .value();\n","import { Menu } from 'antd';\nimport { withRouter } from 'react-router-dom';\n\nimport {\n  defaultOpenedMenu,\n  defaultOpenedSubMenu,\n  routes,\n} from '../routes';\n\nconst { SubMenu } = Menu;\n\nconst SideMenu = withRouter(({ history }) => {\n  return (\n    <Menu\n      theme=\"dark\"\n      defaultSelectedKeys={defaultOpenedSubMenu}\n      selectedKeys={[history.location.pathname]}\n      defaultOpenKeys={defaultOpenedMenu}\n      mode=\"inline\"\n    >\n      {routes.map(({ Icon, title, subItems }) => (\n        <SubMenu key={title} icon={<Icon />} title={title}>\n          {subItems.map(({ title, path }) => (\n            <Menu.Item key={path} onClick={() => history.push(path)}>\n              {title}\n            </Menu.Item>\n          ))}\n        </SubMenu>\n      ))}\n    </Menu>\n  );\n});\n\nexport default SideMenu;\n","import path from 'path';\n\nimport {\n  CheckCircleTwoTone,\n  CloseCircleTwoTone,\n  LoadingOutlined,\n} from '@ant-design/icons';\nimport { notification, Spin, Typography } from 'antd';\nimport { Button, Layout } from 'antd';\nimport P from 'bluebird';\nimport { uniq } from 'lodash';\nimport _ from 'lodash';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\n\nimport { usePluginsState } from '../../store/plugins';\nimport { ProfilerStatsItem } from '../../store/plugins/types';\nimport { loadFile } from '../../utils/loader';\nimport Loader from '../Loader';\nimport SideMenu from '../SideMenu';\n\nimport styles from './index.module.scss';\n\nconst { Content, Footer, Sider } = Layout;\nconst declaration = (\n  window as unknown as {\n    HERMIONE_PROFILER_FILES_DECLARATION: { plugins: string[] };\n  }\n).HERMIONE_PROFILER_FILES_DECLARATION;\nconst files = uniq(declaration.plugins);\n\nconst FILE_LOADER_DELAY_BEFORE_UPDATES = 1000;\nconst FILE_LOADER_DELAY_BEFORE_CLOSE = 1000;\nconst FILE_LOADER_DELAY_BETWEEN_UPDATES = 10;\nconst LOADER_ID = 'loader-progress';\n\nconst MainLayout: React.FC = (props) => {\n  let animationChain = P.delay(FILE_LOADER_DELAY_BEFORE_UPDATES);\n  const [collapsed, setCollapsed] = useState(false);\n  const state = usePluginsState();\n  const updateFileListComponent = () => {\n    const progressItems = state.getSources().map((source) => {\n      const Icon = {\n        loading: <LoadingOutlined twoToneColor=\"blue\" />,\n        empty: <LoadingOutlined />,\n        loaded: <CheckCircleTwoTone twoToneColor=\"#52c41a\" />,\n        error: <CloseCircleTwoTone twoToneColor=\"red\" />,\n      }[source.loadState];\n\n      return (\n        <div key={source.filePath}>\n          <Spin indicator={Icon} /> Loading{' '}\n          <Typography.Text strong>\n            {path.basename(source.filePath)}\n          </Typography.Text>{' '}\n          / {source.rowsCount} rows\n        </div>\n      );\n    });\n\n    animationChain = animationChain\n      .delay(FILE_LOADER_DELAY_BETWEEN_UPDATES)\n      .then(() => {\n        notification.open({\n          description: progressItems,\n          message: 'Downloads:',\n          duration: 0,\n          key: LOADER_ID,\n        });\n      });\n  };\n  const hideFileListComponent = () => {\n    return animationChain\n      .delay(FILE_LOADER_DELAY_BEFORE_CLOSE)\n      .then(() => {\n        notification.close(LOADER_ID);\n      });\n  };\n  const finishLoading = () => {\n    hideFileListComponent().then(() => {\n      state.buildMap();\n      state.setLoadedState();\n    });\n  };\n\n  useEffect(() => {\n    if (!state.shouldFetch()) {\n      return;\n    }\n\n    state.setLoadingState();\n\n    files.forEach((filePath) => {\n      state.addUntrackedSource(filePath);\n\n      const loader = loadFile<ProfilerStatsItem>(filePath);\n\n      loader\n        .on('chunk', (receivedItems) => {\n          state.addUntrackedItems(filePath, receivedItems);\n          updateFileListComponent();\n        })\n        .on('start', () => {\n          state.setUntrackedLoadingSourceState(filePath);\n          updateFileListComponent();\n        })\n        .on('error', (msg: string) => {\n          state.setUntrackedErrorSourceState(filePath, msg);\n          updateFileListComponent();\n\n          if (state.isAllSourcesLoaded()) {\n            finishLoading();\n          }\n        })\n        .on('complete', () => {\n          state.setUntrackedCompleteSourceState(filePath);\n          updateFileListComponent();\n\n          if (state.isAllSourcesLoaded()) {\n            finishLoading();\n          }\n        });\n    });\n  });\n\n  const errors = state.getErrors();\n\n  if (!_.isEmpty(errors)) {\n    console.error('Unable to load files:', errors);\n\n    errors.forEach(({ filePath, error }) => {\n      notification.error({\n        message: filePath,\n        description: error,\n        placement: 'topRight',\n        key: filePath,\n      });\n    });\n  }\n\n  const content = state.isLoading() ? <Loader /> : props.children;\n\n  return (\n    <Layout className={styles.container}>\n      <Sider\n        collapsible\n        collapsed={collapsed}\n        onCollapse={() => setCollapsed(!collapsed)}\n      >\n        <SideMenu />\n      </Sider>\n      <Layout className={styles.rightLayout}>\n        <Content className={styles.contentContainer}>\n          <div className={styles.content}>{content}</div>\n        </Content>\n        <Footer className={styles.footer}>\n          <Button\n            type=\"link\"\n            href=\"https://github.com/gemini-testing/hermione\"\n          >\n            Profiler for hermione\n          </Button>\n        </Footer>\n      </Layout>\n    </Layout>\n  );\n};\n\nexport default MainLayout;\n","import {\n  Redirect,\n  Route,\n  BrowserRouter as Router,\n  Switch,\n} from 'react-router-dom';\n\nimport MainLayout from './components/Main';\nimport { allRoutes, defaultPath } from './routes';\n\nconst App = () => (\n  <Router>\n    <MainLayout>\n      <Switch>\n        <Route\n          exact\n          path=\"/\"\n          render={() => <Redirect to={defaultPath} />}\n        />\n        {allRoutes.map(({ path, Component }) => (\n          <Route key={path} path={path} component={Component} />\n        ))}\n      </Switch>\n    </MainLayout>\n  </Router>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}